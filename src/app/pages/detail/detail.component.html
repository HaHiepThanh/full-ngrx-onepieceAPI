<!--@if(isLoading$|async){-->
<!--  <mat-spinner></mat-spinner>-->
<!--}@else{-->
<!--  @if(characterDetail$|async; as item){-->
<!--    <mat-card class="onepiece-card" appearance="outlined">-->
<!--      <mat-card-header>-->
<!--        <div mat-card-avatar class="avatar">-->
<!--          @if(item.fruit?.filename) {-->
<!--            <img [src]="item.fruit?.filename" alt="{{ item.fruit?.name }}" />-->
<!--          } @else {-->
<!--            <span class="no-fruit">Kh√¥ng ƒÉn tr√°i √°c qu·ª∑</span>-->
<!--          }-->
<!--        </div>-->
<!--        <mat-card-title class="name">{{ item.name }}</mat-card-title>-->
<!--        <mat-card-subtitle class="role">{{ item.job }} - {{ item.crew?.name }}</mat-card-subtitle>-->
<!--      </mat-card-header>-->


<!--      <mat-card-content>-->
<!--        <div class="info">-->
<!--          <p><strong>Age:</strong> {{ item.age }}</p>-->
<!--          <p><strong>Height:</strong> {{ item.size }}</p>-->
<!--          <p><strong>Bounty:</strong> {{ item.bounty }} ‡∏ø</p>-->
<!--          <p><strong>Status:</strong> {{ item.status }}</p>-->
<!--        </div>-->
<!--      </mat-card-content>-->

<!--      <mat-card-actions>-->
<!--        <button mat-raised-button color="warn">LIKE ‚ù§Ô∏è</button>-->
<!--        <button mat-raised-button color="primary">SHARE üìú</button>-->
<!--      </mat-card-actions>-->
<!--    </mat-card>-->
<!--  }-->
<!--}-->

<router-outlet></router-outlet>

<div class="onepiece-container">
  @if (isLoading$ | async) {
    <div class="loading-wrap">
      <mat-spinner diameter="56"></mat-spinner>
    </div>
  } @else {
    @if (characterDetail$ | async; as item) {
      <mat-card class="onepiece-card" [ngClass]="{'yonko': item.crew?.is_yonko}">
        <div class="flag-top" aria-hidden="true">
          @for (_ of [1,2,3,4,5,6]; track $index) {
            <span></span>
          }
        </div>
        <mat-card-header class="card-header">
          <div mat-card-avatar class="avatar" [ngClass]="{'no-fruit': !item.fruit?.filename}">
            @if (item.fruit?.filename) {
              <img [src]="item.fruit?.filename" [alt]="item.fruit?.name" />
            } @else {
              <div class="no-fruit-text">No Devil's Fruit<br/>Consumption</div>
            }
          </div>

          <div class="title-wrap">
            <mat-card-title class="name">{{ item.name }}</mat-card-title>
            <mat-card-subtitle class="role">
              {{ item.job }} ‚Äî <span class="crew-name">{{ item.crew?.name }}</span>
              @if (item.crew?.is_yonko) {
                <span class="yonko-badge" aria-label="Yonko">‚ò†Ô∏è YONKO</span>
              }
            </mat-card-subtitle>
          </div>
        </mat-card-header>

        <mat-card-content>
          <div class="hero">
            <!--          <div class="portrait">-->
            <!--            @if (item.portrait) {-->
            <!--              <img [src]="item.portrait" alt="{{item.name}} portrait" />-->
            <!--            } @else {-->
            <!--              <div class="sketch">‚òÖ</div>-->
            <!--            }-->
            <!--          </div>-->

            <div class="info">
              <ul class="stats">
                @for (stat of [
                  {label: 'Age', value: item.age},
                  {label: 'Height', value: item.size},
                  {label: 'Bounty', value: item.bounty + ' ‡∏ø', bounty: true},
                  {label: 'Status', value: item.status}
                ]; track $index) {
                  <li>
                    <span class="label">{{ stat.label }}</span>
                    <span class="value" [ngClass]="{'bounty': stat.bounty}">{{ stat.value }}</span>
                  </li>
                }
              </ul>

              @if (item.fruit) {
                <div class="fruit-block">
                  <h4>Tr√°i √°c qu·ª∑</h4>
                  <p class="fruit-name">{{ item.fruit.roman_name }} ‚Äî <em>{{ item.fruit.type }}</em></p>
                  <p class="fruit-desc">{{ item.fruit.description }}</p>
                </div>
              }

              <div class="crew-meta">
                <div class="crew-number">
                  <span class="crew-count">{{ item.crew?.number || '‚Äî' }}</span>
                  <span class="crew-label">Crew members</span>
                </div>
                <div class="crew-prime">Prime: {{ item.crew?.total_prime }}</div>
              </div>
            </div>
          </div>
        </mat-card-content>
        <div class="ribbon">MUGIWARA</div>
        <button mat-button (click)="navigateToHome()">Back to home page</button>
      </mat-card>
    } @else {
      <div class="no-data">Kh√¥ng c√≥ d·ªØ li·ªáu nh√¢n v·∫≠t.</div>
    }
  }
</div>

